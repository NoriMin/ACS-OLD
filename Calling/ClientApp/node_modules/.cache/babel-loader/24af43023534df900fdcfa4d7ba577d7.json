{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\t-tamina\\\\source\\\\repos\\\\Communication\\\\samples\\\\Group Calling Hero Sample\\\\Web\\\\Calling\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\t-tamina\\\\source\\\\repos\\\\Communication\\\\samples\\\\Group Calling Hero Sample\\\\Web\\\\Calling\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\t-tamina\\\\source\\\\repos\\\\Communication\\\\samples\\\\Group Calling Hero Sample\\\\Web\\\\Calling\\\\ClientApp\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";// © Microsoft Corporation. All rights reserved.\nimport React,{useEffect,useState}from'react';import{Image,ImageFit,Label}from'@fluentui/react';import{Renderer}from'@azure/communication-calling';import{videoHint,mediaContainer,localVideoContainerStyle}from'./styles/StreamMedia.styles';import{Constants}from'../core/constants';import staticMediaSVG from\"../assets/staticmedia.svg\";export default(function(props){var rendererView;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),available=_useState2[0],setAvailable=_useState2[1];var imageProps={src:staticMediaSVG.toString(),imageFit:ImageFit.contain,maximizeFrame:true};useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var renderer,container;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!props.stream){_context.next=9;break;}renderer=new Renderer(props.stream);_context.next=4;return renderer.createView({scalingMode:'Crop'});case 4:rendererView=_context.sent;container=document.getElementById(Constants.LOCAL_VIDEO_PREVIEW_ID);if(container&&container.childElementCount===0){container.appendChild(rendererView.target);setAvailable(true);}_context.next=10;break;case 9:if(rendererView){rendererView.dispose();setAvailable(false);}case 10:case\"end\":return _context.stop();}}},_callee);}))();return function(){if(rendererView){rendererView.dispose();setAvailable(false);}};},[props.stream]);return/*#__PURE__*/React.createElement(\"div\",{className:mediaContainer},/*#__PURE__*/React.createElement(\"div\",{style:{display:available?'block':'none'},className:localVideoContainerStyle,id:Constants.LOCAL_VIDEO_PREVIEW_ID}),/*#__PURE__*/React.createElement(Image,Object.assign({style:{display:available?'none':'block'}},imageProps)),/*#__PURE__*/React.createElement(Label,{className:videoHint},props.label));});","map":{"version":3,"sources":["C:/Users/t-tamina/source/repos/Communication/samples/Group Calling Hero Sample/Web/Calling/ClientApp/src/components/LocalStreamMedia.tsx"],"names":["React","useEffect","useState","Image","ImageFit","Label","Renderer","videoHint","mediaContainer","localVideoContainerStyle","Constants","props","rendererView","available","setAvailable","imageProps","src","staticMediaSVG","toString","imageFit","contain","maximizeFrame","stream","renderer","createView","scalingMode","container","document","getElementById","LOCAL_VIDEO_PREVIEW_ID","childElementCount","appendChild","target","dispose","display","label"],"mappings":"2rBAAA;AAEA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,KAAT,CAAgBC,QAAhB,CAA0BC,KAA1B,KAAuC,iBAAvC,CACA,OAA2BC,QAA3B,KAAyD,8BAAzD,CACA,OAASC,SAAT,CAAoBC,cAApB,CAAoCC,wBAApC,KAAoE,6BAApE,CACA,OAASC,SAAT,KAA0B,mBAA1B,C,sDAQA,eAAe,SAACC,KAAD,CAA+C,CAC5D,GAAIC,CAAAA,YAAJ,CAD4D,cAG1BV,QAAQ,CAAC,KAAD,CAHkB,wCAGrDW,SAHqD,eAG1CC,YAH0C,eAK5D,GAAMC,CAAAA,UAAU,CAAG,CACjBC,GAAG,CAAEC,cAAc,CAACC,QAAf,EADY,CAEjBC,QAAQ,CAAEf,QAAQ,CAACgB,OAFF,CAGjBC,aAAa,CAAE,IAHE,CAAnB,CAMApB,SAAS,CAAC,UAAM,CACd,wDAAC,8JACKU,KAAK,CAACW,MADX,yBAEOC,QAFP,CAE4B,GAAIjB,CAAAA,QAAJ,CAAaK,KAAK,CAACW,MAAnB,CAF5B,uBAGwBC,CAAAA,QAAQ,CAACC,UAAT,CAAoB,CAAEC,WAAW,CAAE,MAAf,CAApB,CAHxB,QAGGb,YAHH,eAKOc,SALP,CAKmBC,QAAQ,CAACC,cAAT,CAAwBlB,SAAS,CAACmB,sBAAlC,CALnB,CAOG,GAAIH,SAAS,EAAIA,SAAS,CAACI,iBAAV,GAAgC,CAAjD,CAAoD,CAClDJ,SAAS,CAACK,WAAV,CAAsBnB,YAAY,CAACoB,MAAnC,EACAlB,YAAY,CAAC,IAAD,CAAZ,CACD,CAVJ,8BAYG,GAAIF,YAAJ,CAAkB,CAChBA,YAAY,CAACqB,OAAb,GACAnB,YAAY,CAAC,KAAD,CAAZ,CACD,CAfJ,uDAAD,KAmBA,MAAO,WAAM,CACX,GAAIF,YAAJ,CAAkB,CAChBA,YAAY,CAACqB,OAAb,GACAnB,YAAY,CAAC,KAAD,CAAZ,CACD,CACF,CALD,CAMD,CA1BQ,CA0BN,CAACH,KAAK,CAACW,MAAP,CA1BM,CAAT,CA4BA,mBACE,2BAAK,SAAS,CAAEd,cAAhB,eACE,2BACE,KAAK,CAAE,CAAE0B,OAAO,CAAErB,SAAS,CAAG,OAAH,CAAa,MAAjC,CADT,CAEE,SAAS,CAAEJ,wBAFb,CAGE,EAAE,CAAEC,SAAS,CAACmB,sBAHhB,EADF,cAME,oBAAC,KAAD,gBAAO,KAAK,CAAE,CAAEK,OAAO,CAAErB,SAAS,CAAG,MAAH,CAAY,OAAhC,CAAd,EAA6DE,UAA7D,EANF,cAOE,oBAAC,KAAD,EAAO,SAAS,CAAER,SAAlB,EAA8BI,KAAK,CAACwB,KAApC,CAPF,CADF,CAWD,CAlDD","sourcesContent":["// © Microsoft Corporation. All rights reserved.\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { Image, ImageFit, Label } from '@fluentui/react';\r\nimport { LocalVideoStream, Renderer, RendererView } from '@azure/communication-calling';\r\nimport { videoHint, mediaContainer, localVideoContainerStyle } from './styles/StreamMedia.styles';\r\nimport { Constants } from '../core/constants';\r\nimport staticMediaSVG from '../assets/staticmedia.svg';\r\n\r\nexport interface LocalStreamMediaProps {\r\n  label: string;\r\n  stream: LocalVideoStream;\r\n}\r\n\r\nexport default (props: LocalStreamMediaProps): JSX.Element => {\r\n  let rendererView: RendererView;\r\n\r\n  const [available, setAvailable] = useState(false);\r\n\r\n  const imageProps = {\r\n    src: staticMediaSVG.toString(),\r\n    imageFit: ImageFit.contain,\r\n    maximizeFrame: true\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (props.stream) {\r\n        var renderer: Renderer = new Renderer(props.stream);\r\n        rendererView = await renderer.createView({ scalingMode: 'Crop' });\r\n\r\n        var container = document.getElementById(Constants.LOCAL_VIDEO_PREVIEW_ID);\r\n\r\n        if (container && container.childElementCount === 0) {\r\n          container.appendChild(rendererView.target);\r\n          setAvailable(true);\r\n        }\r\n      } else {\r\n        if (rendererView) {\r\n          rendererView.dispose();\r\n          setAvailable(false);\r\n        }\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      if (rendererView) {\r\n        rendererView.dispose();\r\n        setAvailable(false);\r\n      }\r\n    };\r\n  }, [props.stream]);\r\n\r\n  return (\r\n    <div className={mediaContainer}>\r\n      <div\r\n        style={{ display: available ? 'block' : 'none' }}\r\n        className={localVideoContainerStyle}\r\n        id={Constants.LOCAL_VIDEO_PREVIEW_ID}\r\n      />\r\n      <Image style={{ display: available ? 'none' : 'block' }} {...imageProps} />\r\n      <Label className={videoHint}>{props.label}</Label>\r\n    </div>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}