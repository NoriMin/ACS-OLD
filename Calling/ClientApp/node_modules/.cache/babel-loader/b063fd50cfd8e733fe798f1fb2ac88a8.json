{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\t-tamina\\\\source\\\\repos\\\\Communication\\\\samples\\\\Group Calling Hero Sample\\\\Web\\\\Calling\\\\ClientApp\\\\src\\\\components\\\\LocalPreview.tsx\";\n// © Microsoft Corporation. All rights reserved.\nimport React, { useEffect } from 'react';\nimport { Stack, Toggle, Image, ImageFit } from '@fluentui/react';\nimport { MicIcon, CallVideoIcon } from '@fluentui/react-icons-northstar';\nimport { Constants } from '../core/constants';\nimport { LocalVideoStream, Renderer } from '@azure/communication-calling';\nimport staticMediaSVG from \"../assets/staticmedia.svg\";\nimport { toggleStyle, imgStyles, toggleButtonsBarToken, localPreviewContainerStyle, toggleButtonsBarStyle, localPreviewStyle } from './styles/LocalPreview.styles';\nvar rendererView;\nexport default (props => {\n  const imageProps = {\n    src: staticMediaSVG.toString(),\n    imageFit: ImageFit.cover,\n    maximizeFrame: true\n  };\n\n  const handleLocalVideoOnOff = (_ev, checked = false) => {\n    var stream = new LocalVideoStream(props.videoDeviceInfo);\n    props.setLocalVideoStream(checked ? stream : undefined);\n  };\n\n  const handleLocalMicOnOff = (_ev, checked = false) => {\n    props.setMic(checked);\n  };\n\n  useEffect(() => {\n    (async () => {\n      if (props.localVideoStream) {\n        var renderer = new Renderer(props.localVideoStream);\n        rendererView = await renderer.createView({\n          scalingMode: 'Crop'\n        });\n        var container = document.getElementById(Constants.CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID);\n\n        if (container && container.childElementCount === 0) {\n          container.appendChild(rendererView.target);\n        }\n      }\n    })();\n\n    return () => {\n      if (rendererView) {\n        rendererView.dispose();\n      }\n    };\n  }, [props.localVideoStream]);\n  return /*#__PURE__*/React.createElement(Stack, {\n    className: localPreviewContainerStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Stack, {\n    horizontalAlign: \"center\",\n    verticalAlign: \"center\",\n    id: Constants.CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID,\n    className: localPreviewStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, !props.localVideoStream && /*#__PURE__*/React.createElement(Image, Object.assign({\n    styles: imgStyles\n  }, imageProps, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(Stack, {\n    horizontal: true,\n    horizontalAlign: \"center\",\n    verticalAlign: \"center\",\n    tokens: toggleButtonsBarToken,\n    className: toggleButtonsBarStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CallVideoIcon, {\n    size: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Toggle, {\n    onKeyDownCapture: e => {// if (e.keyCode === 13 && props.localVideoRendererIsBusy) {\n      //     e.preventDefault();\n      // }\n    },\n    styles: toggleStyle,\n    disabled: !props.videoDeviceInfo,\n    onChange: handleLocalVideoOnOff,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(MicIcon, {\n    size: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Toggle, {\n    styles: toggleStyle,\n    disabled: !props.audioDeviceInfo,\n    onChange: handleLocalMicOnOff,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  })));\n});","map":{"version":3,"sources":["C:/Users/t-tamina/source/repos/Communication/samples/Group Calling Hero Sample/Web/Calling/ClientApp/src/components/LocalPreview.tsx"],"names":["React","useEffect","Stack","Toggle","Image","ImageFit","MicIcon","CallVideoIcon","Constants","LocalVideoStream","Renderer","toggleStyle","imgStyles","toggleButtonsBarToken","localPreviewContainerStyle","toggleButtonsBarStyle","localPreviewStyle","rendererView","props","imageProps","src","staticMediaSVG","toString","imageFit","cover","maximizeFrame","handleLocalVideoOnOff","_ev","checked","stream","videoDeviceInfo","setLocalVideoStream","undefined","handleLocalMicOnOff","setMic","localVideoStream","renderer","createView","scalingMode","container","document","getElementById","CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID","childElementCount","appendChild","target","dispose","e","audioDeviceInfo"],"mappings":"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","sourcesContent":["// © Microsoft Corporation. All rights reserved.\r\nimport React, { useEffect } from 'react';\r\nimport { Stack, Toggle, Image, ImageFit } from '@fluentui/react';\r\nimport { MicIcon, CallVideoIcon } from '@fluentui/react-icons-northstar';\r\nimport { Constants } from '../core/constants';\r\nimport {\r\n  RendererView,\r\n  VideoDeviceInfo,\r\n  AudioDeviceInfo,\r\n  LocalVideoStream,\r\n  Renderer\r\n} from '@azure/communication-calling';\r\nimport staticMediaSVG from '../assets/staticmedia.svg';\r\nimport {\r\n  toggleStyle,\r\n  imgStyles,\r\n  toggleButtonsBarToken,\r\n  localPreviewContainerStyle,\r\n  toggleButtonsBarStyle,\r\n  localPreviewStyle\r\n} from './styles/LocalPreview.styles';\r\n\r\nexport interface LocalPreviewProps {\r\n  setMic(mic: boolean): void;\r\n  setLocalVideoStream(device: LocalVideoStream | undefined): void;\r\n  videoDeviceInfo: VideoDeviceInfo;\r\n  audioDeviceInfo: AudioDeviceInfo;\r\n  localVideoStream: LocalVideoStream;\r\n}\r\n\r\nvar rendererView: RendererView;\r\n\r\nexport default (props: LocalPreviewProps): JSX.Element => {\r\n  const imageProps = {\r\n    src: staticMediaSVG.toString(),\r\n    imageFit: ImageFit.cover,\r\n    maximizeFrame: true\r\n  };\r\n\r\n  const handleLocalVideoOnOff = (_ev: React.MouseEvent<HTMLElement>, checked = false): void => {\r\n    var stream = new LocalVideoStream(props.videoDeviceInfo);\r\n    props.setLocalVideoStream(checked ? stream : undefined);\r\n  };\r\n  const handleLocalMicOnOff = (_ev: React.MouseEvent<HTMLElement>, checked = false): void => {\r\n    props.setMic(checked);\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (props.localVideoStream) {\r\n        var renderer: Renderer = new Renderer(props.localVideoStream);\r\n        rendererView = await renderer.createView({ scalingMode: 'Crop' });\r\n\r\n        var container = document.getElementById(Constants.CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID);\r\n\r\n        if (container && container.childElementCount === 0) {\r\n          container.appendChild(rendererView.target);\r\n        }\r\n      }\r\n    })();\r\n\r\n    return () => {\r\n      if (rendererView) {\r\n        rendererView.dispose();\r\n      }\r\n    };\r\n  }, [props.localVideoStream]);\r\n  return (\r\n    <Stack className={localPreviewContainerStyle}>\r\n      <Stack\r\n        horizontalAlign=\"center\"\r\n        verticalAlign=\"center\"\r\n        id={Constants.CONFIGURATION_LOCAL_VIDEO_PREVIEW_ID}\r\n        className={localPreviewStyle}\r\n      >\r\n        {!props.localVideoStream && <Image styles={imgStyles} {...imageProps} />}\r\n      </Stack>\r\n      <Stack\r\n        horizontal\r\n        horizontalAlign=\"center\"\r\n        verticalAlign=\"center\"\r\n        tokens={toggleButtonsBarToken}\r\n        className={toggleButtonsBarStyle}\r\n      >\r\n        <CallVideoIcon size=\"medium\" />\r\n        <Toggle\r\n          onKeyDownCapture={(e) => {\r\n            // if (e.keyCode === 13 && props.localVideoRendererIsBusy) {\r\n            //     e.preventDefault();\r\n            // }\r\n          }}\r\n          styles={toggleStyle}\r\n          disabled={!props.videoDeviceInfo}\r\n          onChange={handleLocalVideoOnOff}\r\n        />\r\n        <MicIcon size=\"medium\" />\r\n        <Toggle styles={toggleStyle} disabled={!props.audioDeviceInfo} onChange={handleLocalMicOnOff} />\r\n      </Stack>\r\n    </Stack>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}